<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ูุชุงุฆุฌ ุงูุจุญุซ โ HandyDZ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Cairo', sans-serif; background: #f8f8f8; margin:0; padding:0;}
  header { background: #1E3A8A; color: white; padding: 15px; text-align: center; font-size: 1.5rem; }
  .nav { text-align:center; margin:15px 0; }
  .nav a { margin:0 10px; color:#1E3A8A; text-decoration:none; font-weight:bold; }
  .search-container { padding: 20px; text-align: center; }
  input, select { padding: 10px; margin: 5px 0; width: 80%; max-width: 300px; border-radius: 5px; border: 1px solid #ccc; }
  .results { padding: 20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; }
  .card { background:white; padding:15px; width: 250px; border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.1); text-align:right; }
  .card h3 { margin-bottom:5px; color:#1E3A8A; }
  .card p { margin-bottom:5px; }
  .stars { color: #FFD700; margin-bottom: 8px; }
  .card button { padding:5px 10px; margin:5px 5px 0 0; border:none; border-radius:5px; cursor:pointer; font-size:0.9rem; }
  .btn-call { background:#1E3A8A; color:white; }
  .btn-chat { background:#22C55E; color:white; }
  /* ุงูููุฏุงู */
  .modal { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); justify-content:center; align-items:center; }
  .modal-content { background:white; padding:20px; border-radius:10px; width:90%; max-width:350px; text-align:right; }
  .modal-content input { width: 100%; margin-bottom: 10px; padding:8px; border-radius:5px; border:1px solid #ccc; }
  .modal-content button { width: 48%; padding:10px; margin-top:5px; border:none; border-radius:5px; cursor:pointer; }
  .btn-confirm { background:#22C55E; color:white; }
  .btn-cancel { background:#EF4444; color:white; }
</style>
</head>
<body>

<header>ูุชุงุฆุฌ ุงูุจุญุซ โ HandyDZ</header>

<div class="nav">
  <a href="index.html">๐ ุงูุฑุฆูุณูุฉ</a>
  <a href="register-professional.html">๐งโ๐ง ุชุณุฌูู ูููู</a>
</div>

<div class="search-container">
  <input type="text" id="searchName" placeholder="ุงุจุญุซ ุจุงูุงุณู..." oninput="searchProfessionals()">
  <br>
 <select id="service" name="profession">
    <option value="">-- ุงุฎุชุฑ ุงููููุฉ --</option>
    <optgroup label="๐ง ุงูููู ุงููุฏููุฉ ูุงูุญุฑููุฉ">
      <option value="ููุฑุจุงุฆู">ููุฑุจุงุฆู</option>
      <option value="ุณุจุงู">ุณุจุงู</option>
      <option value="ูุฌุงุฑ">ูุฌุงุฑ</option>
      <option value="ุญุฏุงุฏ">ุญุฏุงุฏ</option>
      <option value="ูุญุงู">ูุญุงู</option>
      <option value="ุจููุงุก">ุจููุงุก</option>
      <option value="ูุจููุท">ูุจููุท</option>
      <option value="ุฏููุงู">ุฏููุงู</option>
      <option value="ุฌุจูุงุต">ุฌุจูุงุต</option>
      <option value="ุตุงูุน ุฃูููููู">ุตุงูุน ุฃูููููู</option>
      <option value="ุตุงูุน PVC">ุตุงูุน PVC</option>
    </optgroup>
    <optgroup label="๐ ููู ุงูุณูุงุฑุงุช">
      <option value="ูููุงูููู ุณูุงุฑุงุช">ูููุงูููู ุณูุงุฑุงุช</option>
      <option value="ููุฑุจุงุฆู ุณูุงุฑุงุช">ููุฑุจุงุฆู ุณูุงุฑุงุช</option>
      <option value="ูุตูุญ ูููู ุณูุงุฑุงุช">ูุตูุญ ูููู ุณูุงุฑุงุช</option>
      <option value="ูุตูุญ ูุฑุงูู">ูุตูุญ ูุฑุงูู</option>
      <option value="ุจูุดุฑ">ูุตูุญ ุนุฌูุงุช (ุจูุดุฑ)</option>
      <option value="ุฏูุงู ุณูุงุฑุงุช">ุฏูุงู ุณูุงุฑุงุช</option>
    </optgroup>
    <optgroup label="โ๏ธ ุงูุชุจุฑูุฏ ูุงูุชูููู">
      <option value="ูุตูุญ ููููุงุช">ูุตูุญ ููููุงุช</option>
      <option value="ุชููู ุชุจุฑูุฏ">ุชููู ุชุจุฑูุฏ</option>
      <option value="ุชุฑููุจ ููููุงุช">ุชุฑููุจ ููููุงุช</option>
    </optgroup>
    <optgroup label="๐ ุงูุฃุฌูุฒุฉ ุงูููุฑูููุฒููุฉ">
      <option value="ูุตูุญ ุบุณุงูุงุช">ูุตูุญ ุบุณุงูุงุช</option>
      <option value="ูุตูุญ ุซูุงุฌุงุช">ูุตูุญ ุซูุงุฌุงุช</option>
      <option value="ูุตูุญ ุฃูุฑุงู">ูุตูุญ ุฃูุฑุงู</option>
      <option value="ูุตูุญ ุณุฎุงูุงุช ููุงู">ูุตูุญ ุณุฎุงูุงุช ููุงู</option>
      <option value="ูุตูุญ ุชููุฒูููุงุช">ูุตูุญ ุชููุฒูููุงุช</option>
    </optgroup>
    <optgroup label="๐ป ุงูุชูููุฉ">
      <option value="ูุตูุญ ููุงุชู">ูุตูุญ ููุงุชู</option>
      <option value="ูุตูุญ ุญูุงุณูุจ">ูุตูุญ ุญูุงุณูุจ</option>
      <option value="ุชููู ุดุจูุงุช">ุชููู ุดุจูุงุช</option>
      <option value="ุชุฑููุจ ูุงููุฑุงุช ูุฑุงูุจุฉ">ุชุฑููุจ ูุงููุฑุงุช ูุฑุงูุจุฉ</option>
    </optgroup>
    <optgroup label="๐งน ุงูุฎุฏูุงุช ุงูููุฒููุฉ">
      <option value="ุนุงูู ุชูุธูู">ุนุงูู ุชูุธูู</option>
      <option value="ุนุงููุฉ ุชูุธูู">ุนุงููุฉ ุชูุธูู</option>
      <option value="ุชูุธูู ุจุนุฏ ุงูุจูุงุก">ุชูุธูู ุจุนุฏ ุงูุจูุงุก</option>
      <option value="ุชูุธูู ุณุฌุงุฏ">ุชูุธูู ุณุฌุงุฏ</option>
      <option value="ุฌููุณุฉ ุฃุทูุงู">ุฌููุณุฉ ุฃุทูุงู</option>
      <option value="ุฑุนุงูุฉ ูุณููู">ุฑุนุงูุฉ ูุณููู</option>
    </optgroup>
    <optgroup label="๐ณ ุงูุฒุฑุงุนุฉ ูุงูุญุฏุงุฆู">
      <option value="ุจุณุชุงูู">ุจุณุชุงูู</option>
      <option value="ุชูุณูู ุญุฏุงุฆู">ุชูุณูู ุญุฏุงุฆู</option>
      <option value="ุชูููู ุฃุดุฌุงุฑ">ุชูููู ุฃุดุฌุงุฑ</option>
    </optgroup>
    <optgroup label="๐จ ุงูุฌูุงู ูุงูููุถุฉ">
      <option value="ุญูุงู ุฑุฌุงูู">ุญูุงู ุฑุฌุงูู</option>
      <option value="ุญูุงูุฉ ูุณุงุฆูุฉ">ุญูุงูุฉ ูุณุงุฆูุฉ</option>
      <option value="ุฎุจูุฑุฉ ุชุฌููู">ุฎุจูุฑุฉ ุชุฌููู</option>
      <option value="ูููุงุฌ">ูููุงุฌ</option>
      <option value="ุฎูุงุทุฉ">ุฎูุงุทุฉ</option>
    </optgroup>
    <optgroup label="๐ธ ุงูุฅุนูุงู ูุงูุฎุฏูุงุช ุงูุฅุจุฏุงุนูุฉ">
      <option value="ูุตูุฑ ููุชูุบุฑุงูู">ูุตูุฑ ููุชูุบุฑุงูู</option>
      <option value="ูุตูุฑ ููุฏูู">ูุตูุฑ ููุฏูู</option>
      <option value="ูููุชูุฑ">ูููุชูุฑ</option>
      <option value="ูุตูู ุฌุฑุงููู">ูุตูู ุฌุฑุงููู</option>
    </optgroup>
    <optgroup label="๐ฆ ุงูููู ูุงูุฎุฏูุงุช">
      <option value="ููู ุฃุซุงุซ">ููู ุฃุซุงุซ</option>
      <option value="ุชูุตูู ุทูุจุงุช">ุชูุตูู ุทูุจุงุช</option>
      <option value="ุณุงุฆู ุฎุงุต">ุณุงุฆู ุฎุงุต</option>
    </optgroup>
    <optgroup label="๐๏ธ ุงูุจูุงุก ูุงูุฃุดุบุงู ุงููุจุฑู">
      <option value="ููุงูู ุจูุงุก">ููุงูู ุจูุงุก</option>
      <option value="ุนุฒู ูุงุฆู">ุนุฒู ูุงุฆู</option>
      <option value="ุนุฒู ุญุฑุงุฑู">ุนุฒู ุญุฑุงุฑู</option>
    </optgroup>
    <optgroup label="๐ ุงูุชุนููู ูุงูุฎุฏูุงุช ุงูููุฑูุฉ">
      <option value="ุฃุณุชุงุฐ ุฏุนู">ุฃุณุชุงุฐ ุฏุนู</option>
      <option value="ูุฏุฑุจ ุฑูุงุถู">ูุฏุฑุจ ุฑูุงุถู</option>
      <option value="ูุชุฑุฌู">ูุชุฑุฌู</option>
    </optgroup>
    <optgroup label="โ๏ธ ุฎุฏูุงุช ููููุฉ ุญุฑุฉ">
      <option value="ูุญุงุณุจ ุญุฑ">ูุญุงุณุจ ุญุฑ</option>
      <option value="ูุณุชุดุงุฑ ูุงูููู">ูุณุชุดุงุฑ ูุงูููู</option>
      <option value="ุณูุณุงุฑ ุนูุงุฑุงุช">ุณูุณุงุฑ ุนูุงุฑุงุช</option>
    </optgroup>
    <optgroup label="๐ ุฎุฏูุงุช ุงูููุงุณุจุงุช">
      <option value="ุทุจุงุฎ ููุงุณุจุงุช">ุทุจุงุฎ ููุงุณุจุงุช</option>
      <option value="ุญููุงูู">ุญููุงูู</option>
      <option value="ููุธู ุญููุงุช">ููุธู ุญููุงุช</option>
      <option value="DJ">DJ</option>
    </optgroup>
  </select>
 </select>

  <br>
  <select id="city" onchange="searchProfessionals()">
    <option value="">ุงุฎุชุฑ ุงูููุงูุฉ</option>
    <option value="ุฃุฏุฑุงุฑ">01 - ุฃุฏุฑุงุฑ</option>
    <option value="ุงูุดูู">02 - ุงูุดูู</option>
    <option value="ุงูุฃุบูุงุท">03 - ุงูุฃุบูุงุท</option>
    <option value="ุฃู ุงูุจูุงูู">04 - ุฃู ุงูุจูุงูู</option>
    <option value="ุจุงุชูุฉ">05 - ุจุงุชูุฉ</option>
    <option value="ุจุฌุงูุฉ">06 - ุจุฌุงูุฉ</option>
    <option value="ุจุณูุฑุฉ">07 - ุจุณูุฑุฉ</option>
    <option value="ุจุดุงุฑ">08 - ุจุดุงุฑ</option>
    <option value="ุงูุจููุฏุฉ">09 - ุงูุจููุฏุฉ</option>
    <option value="ุงูุจููุฑุฉ">10 - ุงูุจููุฑุฉ</option>
    <option value="ุชููุฑุงุณุช">11 - ุชููุฑุงุณุช</option>
    <option value="ุชุจุณุฉ">12 - ุชุจุณุฉ</option>
    <option value="ุชููุณุงู">13 - ุชููุณุงู</option>
    <option value="ุชูุงุฑุช">14 - ุชูุงุฑุช</option>
    <option value="ุชูุฒู ูุฒู">15 - ุชูุฒู ูุฒู</option>
    <option value="ุงูุฌุฒุงุฆุฑ ุงูุนุงุตูุฉ">16 - ุงูุฌุฒุงุฆุฑ ุงูุนุงุตูุฉ</option>
    <option value="ุงูุฌููุฉ">17 - ุงูุฌููุฉ</option>
    <option value="ุฌูุฌู">18 - ุฌูุฌู</option>
    <option value="ุณุทูู">19 - ุณุทูู</option>
    <option value="ุณุนูุฏุฉ">20 - ุณุนูุฏุฉ</option>
    <option value="ุณูููุฏุฉ">21 - ุณูููุฏุฉ</option>
    <option value="ุณูุฏู ุจูุนุจุงุณ">22 - ุณูุฏู ุจูุนุจุงุณ</option>
    <option value="ุนูุงุจุฉ">23 - ุนูุงุจุฉ</option>
    <option value="ูุงููุฉ">24 - ูุงููุฉ</option>
    <option value="ูุณูุทููุฉ">25 - ูุณูุทููุฉ</option>
    <option value="ุงููุฏูุฉ">26 - ุงููุฏูุฉ</option>
    <option value="ูุณุชุบุงูู">27 - ูุณุชุบุงูู</option>
    <option value="ุงููุณููุฉ">28 - ุงููุณููุฉ</option>
    <option value="ูุนุณูุฑ">29 - ูุนุณูุฑ</option>
    <option value="ูุฑููุฉ">30 - ูุฑููุฉ</option>
    <option value="ููุฑุงู">31 - ููุฑุงู</option>
    <option value="ุงูุจูุถ">32 - ุงูุจูุถ</option>
    <option value="ุฅููุฒู">33 - ุฅููุฒู</option>
    <option value="ุจุฑุฌ ุจูุนุฑูุฑูุฌ">34 - ุจุฑุฌ ุจูุนุฑูุฑูุฌ</option>
    <option value="ุจููุฑุฏุงุณ">35 - ุจููุฑุฏุงุณ</option>
    <option value="ุงูุทุงุฑู">36 - ุงูุทุงุฑู</option>
    <option value="ุชูุฏูู">37 - ุชูุฏูู</option>
    <option value="ุชูุณูุณููุช">38 - ุชูุณูุณููุช</option>
    <option value="ุงููุงุฏู">39 - ุงููุงุฏู</option>
    <option value="ุฎูุดูุฉ">40 - ุฎูุดูุฉ</option>
    <option value="ุณูู ุฃูุฑุงุณ">41 - ุณูู ุฃูุฑุงุณ</option>
    <option value="ุชูุจุงุฒุฉ">42 - ุชูุจุงุฒุฉ</option>
    <option value="ูููุฉ">43 - ูููุฉ</option>
    <option value="ุนูู ุงูุฏููู">44 - ุนูู ุงูุฏููู</option>
    <option value="ุงููุนุงูุฉ">45 - ุงููุนุงูุฉ</option>
    <option value="ุนูู ุชููุดูุช">46 - ุนูู ุชููุดูุช</option>
    <option value="ุบุฑุฏุงูุฉ">47 - ุบุฑุฏุงูุฉ</option>
    <option value="ุบููุฒุงู">48 - ุบููุฒุงู</option>
    <option value="ุชูููููู">49 - ุชูููููู</option>
    <option value="ุจุฑุฌ ุจุงุฌู ูุฎุชุงุฑ">50 - ุจุฑุฌ ุจุงุฌู ูุฎุชุงุฑ</option>
    <option value="ุฃููุงุฏ ุฌูุงู">51 - ุฃููุงุฏ ุฌูุงู</option>
    <option value="ุจูู ุนุจุงุณ">52 - ุจูู ุนุจุงุณ</option>
    <option value="ุฅู ุตุงูุญ">53 - ุฅู ุตุงูุญ</option>
    <option value="ุฅู ูุฒุงู">54 - ุฅู ูุฒุงู</option>
    <option value="ุชููุฑุช">55 - ุชููุฑุช</option>
    <option value="ุฌุงูุช">56 - ุฌุงูุช</option>
    <option value="ุงููุบูุฑ">57 - ุงููุบูุฑ</option>
    <option value="ุงููููุนุฉ">58 - ุงููููุนุฉ</option>
    <option value="ุฃููู">59 - ุฃููู</option>
    <option value="ุจุฑููุฉ">60 - ุจุฑููุฉ</option>
    <option value="ูุตุฑ ุงูุดูุงูุฉ">61 - ูุตุฑ ุงูุดูุงูุฉ</option>
    <option value="ูุณุนุฏ">62 - ูุณุนุฏ</option>
    <option value="ุนูู ูุณุงุฑุฉ">63 - ุนูู ูุณุงุฑุฉ</option>
    <option value="ุจูุณุนุงุฏุฉ">64 - ุจูุณุนุงุฏุฉ</option>
    <option value="ุงูุฃุจูุถ ุณูุฏู ุงูุดูุฎ">65 - ุงูุฃุจูุถ ุณูุฏู ุงูุดูุฎ</option>
    <option value="ุงูููุทุฑุฉ">66 - ุงูููุทุฑุฉ</option>
    <option value="ุจุฆุฑ ุงูุนุงุชุฑ">67 - ุจุฆุฑ ุงูุนุงุชุฑ</option>
    <option value="ูุตุฑ ุงูุจุฎุงุฑู">68 - ูุตุฑ ุงูุจุฎุงุฑู</option>
    <option value="ุงูุนุฑูุดุฉ">69 - ุงูุนุฑูุดุฉ</option>
  </select>
</div>

<div class="results" id="results"></div>

<!-- ููุฏุงู ุงูุฒุจูู -->
<div class="modal" id="customerModal">
  <div class="modal-content">
    <h3>ุงูุฑุฌุงุก ุฅุฏุฎุงู ุจูุงูุงุชู</h3>
    <input type="text" id="customerName" placeholder="ุงูุงุณู ุงููุงูู">
    <input type="text" id="customerPhone" placeholder="ุฑูู ุงููุงุชู">
    <div style="display:flex; justify-content:space-between;">
      <button class="btn-confirm" onclick="confirmContact()">ุชุฃููุฏ</button>
      <button class="btn-cancel" onclick="closeModal()">ุฅูุบุงุก</button>
    </div>
  </div>
</div>

<script>
let selectedPro = null;
let contactType = '';

// ุฌูุจ ุงููููููู ูู localStorage
function getProfessionals() {
  return JSON.parse(localStorage.getItem('professionals') || '[]');
}

// ุงูุจุญุซ ุงููุจุงุดุฑ ูุฅุธูุงุฑ ุงููููููู ุงููุดุทูู ููุท
function searchProfessionals() {
  const nameQuery = document.getElementById('searchName').value.trim().toLowerCase();
  const service = document.getElementById('service').value;
  const city = document.getElementById('city').value;
  const resultsDiv = document.getElementById('results');
  resultsDiv.innerHTML = '';

  let pros = getProfessionals();

  // ุฅุธูุงุฑ ููุท ุงููููููู ุงูุฐูู ุชู ุชูุนูู ุงุดุชุฑุงููู
  const filtered = pros.filter(p => {
    if(p.subscription?.status !== 'active') return false; // <-- ุดุฑุท ุงูุชูุนูู
    if(nameQuery && !p.name.toLowerCase().includes(nameQuery)) return false;
    if(service && p.service !== service) return false;
    if(city && p.city !== city) return false;
    return true;
  });

  if(filtered.length === 0){
    resultsDiv.innerHTML = '<p>ูุง ุชูุฌุฏ ูุชุงุฆุฌ</p>';
    return;
  }

  filtered.forEach(p => {
    const rating = p.rating || 4;
    const stars = 'โญ'.repeat(rating) + 'โ'.repeat(5 - rating);

    const maskedPhone = p.phone.slice(0,2) + '********';

    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `
      <h3>${p.name}</h3>
      <p>ุงููููุฉ: ${p.service}</p>
      <p>ุงูููุงูุฉ: ${p.city}</p>
      <p class="stars">${stars}</p>
      <p>ุฑูู ุงููุงุชู: ${maskedPhone}</p>
      <button class="btn-call" onclick="openCustomerModal('${p.phone}','call')">๐ ุงุชุตุงู</button>
      <button class="btn-chat" onclick="openCustomerModal('${p.phone}','chat')">๐ฌ ูุงุชุณุงุจ</button>
    `;
    resultsDiv.appendChild(card);
  });
}

// ูุชุญ ุงูููุฏุงู
function openCustomerModal(proPhone, type){
  selectedPro = proPhone;
  contactType = type;
  document.getElementById('customerName').value = '';
  document.getElementById('customerPhone').value = '';
  document.getElementById('customerModal').style.display = 'flex';
}

// ุฅุบูุงู ุงูููุฏุงู
function closeModal(){
  document.getElementById('customerModal').style.display = 'none';
}

// ุชุฃููุฏ ุจูุงูุงุช ุงูุฒุจูู ูุญูุธูุง
function confirmContact(){
  const name = document.getElementById('customerName').value.trim();
  const phone = document.getElementById('customerPhone').value.trim();

  if(!name || !phone){
    alert('ูุฑุฌู ุชุนุจุฆุฉ ุฌููุน ุงูุญููู');
    return;
  }

  const customers = JSON.parse(localStorage.getItem('customers') || '[]');
  customers.push({
    customerName: name,
    customerPhone: phone,
    proPhone: selectedPro,
    contactType: contactType,
    date: new Date().toLocaleString()
  });
  localStorage.setItem('customers', JSON.stringify(customers));

  closeModal();

  if(contactType === 'call'){
    window.location.href = 'tel:' + selectedPro;
  } else if(contactType === 'chat'){
    window.open('https://wa.me/' + selectedPro,'_blank');
  }
}

document.addEventListener('DOMContentLoaded', searchProfessionals);
</script>
</body>
</html>
